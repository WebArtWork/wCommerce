import{a as L}from"./chunk-JBSIIXIA.js";import{b as N,e as q}from"./chunk-QJDHHX4S.js";import{$ as C,Bb as V,Cb as F,G as M,I as s,Ia as S,L as o,M as P,N as O,Q as w,S as a,Va as I,W as c,X as d,Y as b,Za as k,_a as r,a as m,aa as p,b as f,ba as g,jb as j,ka as v,kb as E,nb as T,qb as z,s as y,sb as U,x as u,y as x}from"./chunk-CNPABYXW.js";function W(e,_){if(e&1&&b(0,"img",9),e&2){let t=g();a("src",t.logo,M)}}function Y(e,_){e&1&&b(0,"icon-spider")}function G(e,_){if(e&1){let t=C();c(0,"span",10),p("click",function(){u(t);let i=g();return x(i.us.setMode("dark"))}),v(1," dark_mode "),d()}}function K(e,_){if(e&1){let t=C();c(0,"span",10),p("click",function(){u(t);let i=g();return x(i.us.setMode())}),v(1," light_mode "),d()}}var B=(()=>{class e{constructor(t,n,i,h,D,H,R,A){this.us=t,this.ui=n,this._alert=i,this._http=h,this._hash=D,this._router=H,this._form=R,this._translate=A,this.logo=r.meta.logo,this.form=this._form.getForm("sign",{formId:"sign",title:"Sign In / Sign Up",components:[{name:"Email",key:"email",focused:!0,required:!0,fields:[{name:"Placeholder",value:"Enter your email"},{name:"Label",value:"Email"}]},{name:"Password",key:"password",required:!0,fields:[{name:"Placeholder",value:"Enter your password"},{name:"Label",value:"Password"}]},{name:"Number",key:"resetPin",fields:[{name:"Placeholder",value:"Enter code from email"},{name:"Label",value:"code"}],hidden:!0},{name:"Button",fields:[{name:"Label",value:"Let's go"},{name:"Submit",value:!0},{name:"Click",value:()=>{this.submit()}}]}]}),this.user=r.sign,this._set=l=>{l?(localStorage.setItem("waw_user",JSON.stringify(l)),this._http.set("token",l.token),this.us.setUser(l),this.us.get({query:r.appId?"appId="+r.appId:""}),this._router.navigateByUrl("/profile")):this._alert.error({text:"Something went wrong"})}}submit(){!this.form.components[2].hidden&&this.user.resetPin?this.save():this.user.email||this._alert.error({text:this._translate.translate("Sign.Enter your email")}),this.ui.valid(this.user.email)?this.user.password?(this._hash.set("email",this.user.email),this._http.post("/api/user/status",this.user,t=>{t.email&&t.pass?this.login():t.email?this.reset():this.sign()})):this._alert.error({text:this._translate.translate("Sign.Enter your password")}):this._alert.error({text:this._translate.translate("Sign.Enter proper email")})}login(){this._http.post("/api/user/login",f(m({},this.user),{appId:r.appId}),this._set.bind(this))}sign(){this._http.post("/api/user/sign",f(m({},this.user),{appId:r.appId}),this._set.bind(this))}reset(){this._http.post("/api/user/request",this.user,()=>{this.form.components[2].hidden=!1}),this._alert.info({text:"Mail will sent to your email"})}save(){this._http.post("/api/user/change",f(m({},this.user),{appId:r.appId}),t=>{t?this._alert.info({text:"Password successfully changed"}):this._alert.error({text:"Wrong Code"}),this.login()})}static{this.\u0275fac=function(n){return new(n||e)(o(L),o(z),o(E),o(j),o(T),o(I),o(V),o(U))}}static{this.\u0275cmp=P({type:e,selectors:[["ng-component"]],standalone:!1,decls:10,vars:6,consts:[[1,"auth-wrapper"],[1,"auth__wrap"],[1,"auth__img",3,"click"],["alt","Logo",3,"src",4,"ngIf"],[4,"ngIf"],[1,"auth__form"],[1,"auth"],["class","material-icons",3,"click",4,"ngIf"],[3,"wSubmit","submition","config"],["alt","Logo",3,"src"],[1,"material-icons",3,"click"]],template:function(n,i){n&1&&(c(0,"div",0)(1,"div",1)(2,"div",2),p("click",function(){return i.us.setMode(i.us.mode?"":"dark")}),w(3,W,1,1,"img",3)(4,Y,1,0,"icon-spider",4),d(),c(5,"div",5)(6,"div",6),w(7,G,2,0,"span",7)(8,K,2,0,"span",7),c(9,"wform",8),p("wSubmit",function(){return i.submit()}),d()()()()()),n&2&&(s(3),a("ngIf",i.logo),s(),a("ngIf",!i.logo),s(3),a("ngIf",!i.us.mode),s(),a("ngIf",i.us.mode),s(),a("submition",i.user)("config",i.form))},dependencies:[S,F,N],styles:["[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #3558ae;--c-primary: #256eff;--c-primary-hover: #0051f1;--c-secondary: rgb(197, 61, 61);--c-secondary-hover: rgb(150, 42, 42);--c-bg-primary: #f3f4f7;--c-bg-secondary: #ffffff;--c-bg-tertiary: #fcfdfe;--c-border: #f0f1f7;--c-shadow: #f3f3f3;--c-text-primary: #666666;--c-text-secondary: #19235c;--c-placeholder: #313335ab;--c-img-round: 50%;--card-background: #fefefe;--card-border-radius: 10px;--card-box-shadow: 0 4px 12px rgba(0, 0, 0, .15);--card-margin-bottom: 24px;--card-header-padding: 20px;--card-header-background: #e0e0e0;--card-body-padding: 20px;--card-section-padding: 10px 0;--card-footer-padding: 20px;--card-footer-background: #e0e0e0;--card-border-width: 2px;--card-border-color: #cccccc;--file-img-border-radius: 50%;--file-add-bg: #28a745;--file-add-bg-hover: #218838;--file-item-border-radius: 10px;--day-name: #988888;--b-radius-btn: 10px;--transition: all .3s;--events: #4c8e9d;--border: rgba(102, 91, 91, .432);--header-doc:#d8d8d8}html.dark[_ngcontent-%COMP%]:root{--c-white: #fff;--c-basic: #333;--c-bg-primary: #282828;--c-bg-secondary: #343434;--c-bg-tertiary: #404040;--c-border: #404040;--c-shadow: #444444;--c-text-primary: #ffffff;--c-text-secondary: #ffffff;--c-placeholder: #d3cdcd;--c-calendar: #141414;--day-name: #dad5d5;--events: #1c2e32;--border: rgb(255 255 255 / 23%);--header-doc:#1b1b1be3}[_nghost-%COMP%]{position:fixed;width:100%;height:100%;overflow-y:auto;display:flex;flex-direction:column}.auth-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;background:var(--c-bg-primary);flex-grow:1;padding:20px;transition:all .3s}.auth[_ngcontent-%COMP%]{max-width:340px;width:100%;padding:30px;border-radius:10px;box-shadow:0 0 6px var(--c-shadow);background:var(--c-bg-secondary);display:flex;flex-flow:row wrap;position:relative}.auth[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;right:25px;top:25px;z-index:9;cursor:pointer}@media (max-width: 767.9px){.auth[_ngcontent-%COMP%]{padding:25px;flex-flow:column wrap}}.auth__title[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:var(--c-text-primary);text-align:center;margin-bottom:15px}@media (max-width: 767.9px){.auth__title[_ngcontent-%COMP%]{font-size:18px}}.auth__btn[_ngcontent-%COMP%]{text-align:center;margin-top:30px}.auth__btn[_ngcontent-%COMP%]   .w-btn[_ngcontent-%COMP%]{margin:0;width:100%}.auth__wrap[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;align-items:center;max-width:880px;width:100%}@media (max-width: 767.9px){.auth__wrap[_ngcontent-%COMP%]{padding:25px;flex-flow:column wrap}}.auth__img[_ngcontent-%COMP%]{flex:0 0 50%;max-width:50%;display:flex;position:relative;padding-right:40px}.auth__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{left:50%;transform:translate(-78%);font-size:320px;position:absolute;opacity:0;cursor:pointer}@media (max-width: 767.9px){.auth__img[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:70px;transform:translate(-50%)}}.auth__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:260px;width:100%;object-fit:cover}.auth__img[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:260px;width:100%;height:100%}@media (max-width: 767.9px){.auth__img[_ngcontent-%COMP%]{max-width:60px;margin:0 auto;flex:0 0 100%;padding:0 0 30px}.auth__img[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:100%;width:100%}}.auth__form[_ngcontent-%COMP%]{width:95%;flex:0 0 50%;max-width:50%;padding-left:40px;display:flex;justify-content:flex-end}@media (max-width: 767.9px){.auth__form[_ngcontent-%COMP%]{flex:0 0 100%;max-width:100%;justify-content:center;padding:0}}@media (max-width: 767.9px){.auth[_ngcontent-%COMP%]   .form__title[_ngcontent-%COMP%]{font-size:14px}}wform[_ngcontent-%COMP%]{flex:1 0}@media (max-width: 767.9px){wform[_ngcontent-%COMP%]{flex:0 0 100%;padding:0}}.w-forms[_ngcontent-%COMP%]{position:relative}.w-forms__level[_ngcontent-%COMP%]{top:5px;right:5px;position:absolute;display:inline-block;color:var(--c-text-secondary);font-size:22px;letter-spacing:.3px;transition:.3s all ease-in-out}.w-forms__level._sky[_ngcontent-%COMP%]{color:#17a2b8}.w-forms__level._orange[_ngcontent-%COMP%]{color:#e67e22}.w-forms__level._green[_ngcontent-%COMP%]{color:#14c76e}.w-forms__input[_ngcontent-%COMP%]{padding-right:35px}.w-forms__input-block[_ngcontent-%COMP%]{position:relative}.w-forms__toggle[_ngcontent-%COMP%]{display:flex;position:absolute;right:10px;top:50%;color:var(--c-placeholder);transform:translateY(-50%);cursor:pointer}.w-forms__toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:21px}.w-forms[_ngcontent-%COMP%]   .icon-visibility[_ngcontent-%COMP%]{color:var(--c-primary)}@media screen and (max-width: 768px){.auth__img[_ngcontent-%COMP%]{display:none}}"]})}}return e})();var Q=[{path:"",component:B}],le=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=O({type:e})}static{this.\u0275inj=y({imports:[k.forChild(Q),q]})}}return e})();export{le as SignModule};
