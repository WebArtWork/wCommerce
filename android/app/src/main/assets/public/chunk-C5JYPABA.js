import{f as r,ib as c,r as o,u as d}from"./chunk-CNPABYXW.js";var u=(()=>{class i{constructor(t){this._storeService=t,this._storeService.getJson("cart_products",e=>this.products=e||this.products||[])}add(t){this.isAdded(t).then(e=>{e||(this.products.push(t),this._update())})}remove(t){this.isAdded(t).then(e=>{e&&(this.products.splice(this.products.findIndex(s=>s._id===t._id),1),this._update())})}toggle(t){this.isAdded(t).then(e=>{e?this.remove(t):this.add(t)})}isAdded(t){return r(this,null,function*(){return new Promise(e=>{let s=()=>{this.products?e(!!this.products.find(n=>n._id===t._id)):setTimeout(s.bind(this),100)};s()})})}_update(){this._storeService.setJson("cart_products",this.products)}wait(t){return new Promise(e=>setTimeout(e,t))}static{this.\u0275fac=function(e){return new(e||i)(d(c))}}static{this.\u0275prov=o({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{u as a};
