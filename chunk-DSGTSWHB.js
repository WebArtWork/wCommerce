import{a as b}from"./chunk-AXNA5GID.js";import{e as k}from"./chunk-IJ4Z7FZT.js";import{Db as v,Eb as g,I as l,Lb as C,Sb as y,Ub as F,da as m,fa as u,ga as d,la as h,ra as f,sb as p,tb as a,zb as _}from"./chunk-YSNUVGWI.js";var w={formId:"commerce",title:"Commerce",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill commerce title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill commerce description"},{name:"Label",value:"Description"}]}]};var S=(()=>{class t{changeAuthorsik(c,r){this._http.post("/api/commerce/changeAuthor",{author:r,commerce:c}).subscribe({next:()=>console.log("Author changed successfully"),error:o=>console.error("Error changing author:",o)})}get rows(){return this._commerceService.commerces}constructor(c,r,o,i,s,A){this._translate=c,this._commerceService=r,this._alert=o,this._form=i,this._core=s,this._http=A,this.columns=["name","description"],this.form=this._form.getForm("commerce",w),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(e,n)=>{this._commerceService.create(e),n()}})},update:e=>{this._form.modal(this.form,[],e).then(n=>{this._core.copy(n,e),this._commerceService.update(e)})},delete:e=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this commerce?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._commerceService.delete(e)}}]})},buttons:[{icon:"store",hrefFunc:e=>"/commerce/commercestores/"+e._id},{icon:"home",hrefFunc:e=>"/commerce/commercewarehouses/"+e._id},{icon:"production_quantity_limits",hrefFunc:e=>"/commerce/commerceproducts/"+e._id},{icon:"style",hrefFunc:e=>"/commerce/commercetags/commerce/"+e._id},a.commerceArticleUrl?{icon:"article",hrefFunc:e=>a.commerceArticleUrl+"/Commerce/"+e._id}:null,!1,!1,!1,!1,!1,!1,!1,!1],headerButtons:[{icon:"playlist_add",click:this._bulkManagement(),class:"playlist"},{icon:"edit_note",click:this._bulkManagement(!1),class:"edit"}]},this.formAuthor=this._form.getForm("change author",{formId:"change author",title:"Change Author",components:[{name:"Text",key:"author",focused:!0,fields:[{name:"Placeholder",value:"Enter new author name"},{name:"Label",value:"New Author"}]}]})}_bulkManagement(c=!0){return()=>{this._form.modalDocs(c?[]:this.rows).then(r=>{if(c)for(let o of r)this._commerceService.create(o);else{for(let o of this.rows)r.find(i=>i._id===o._id)||this._commerceService.delete(o);for(let o of r){let i=this.rows.find(s=>s._id===o._id);i?(this._core.copy(o,i),this._commerceService.update(i)):(o.__created=!1,this._commerceService.create(o))}}})}}static{this.\u0275fac=function(r){return new(r||t)(m(C),m(b),m(g),m(F),m(_),m(v))}}static{this.\u0275cmp=u({type:t,selectors:[["ng-component"]],standalone:!1,decls:1,vars:3,consts:[["title","\u041A\u043E\u043C\u0435\u0440\u0446\u0456\u0457",3,"columns","config","rows"]],template:function(r,o){r&1&&f(0,"wtable",0),r&2&&h("columns",o.columns)("config",o.config)("rows",o.rows)},dependencies:[y],encapsulation:2})}}return t})();var I=[{path:"",component:S}],Y=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=d({type:t})}static{this.\u0275inj=l({imports:[p.forChild(I),k]})}}return t})();export{Y as CommercesModule};
