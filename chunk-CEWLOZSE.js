import{a as R}from"./chunk-GKEHRPNS.js";import{e as P}from"./chunk-IJ4Z7FZT.js";import{$ as a,Eb as q,Fa as l,Ha as u,I as g,Ia as D,Lb as V,Na as b,P as S,Q as x,Rb as A,Sb as B,Ub as J,_b as L,ab as j,bb as M,da as d,fa as y,ga as I,ja as _,la as f,ob as N,pa as m,qa as c,sa as w,sb as $,ta as E,tb as O,ua as F,va as T,wa as v,zb as k}from"./chunk-YSNUVGWI.js";var Y={formId:"commerceorder",title:"Commerceorder",components:[{name:"Text",key:"name",focused:!0,fields:[{name:"Placeholder",value:"fill commerceorder title"},{name:"Label",value:"Title"}]},{name:"Text",key:"description",fields:[{name:"Placeholder",value:"fill commerceorder description"},{name:"Label",value:"Description"}]}]};var H=()=>["new","ordered","preparing","sent","completed"];function K(t,n){if(t&1){let e=F();m(0,"wselect",5),T("modelChange",function(r){let o=S(e).$implicit,p=v();return x(p.setStatus(o,r))}),c()}if(t&2){let e=n.$implicit;f("select",e.status)("items",b(2,H))}}function Q(t,n){if(t&1&&l(0),t&2){let e=n.$implicit;u(" ",e._id," ")}}function U(t,n){if(t&1&&(m(0,"div"),l(1),c()),t&2){let e=n.$implicit;a(),D(" ",e==null||e.product==null?null:e.product.name," ",e==null||e.product==null?null:e.product.price," \u0433\u0440\u043D x ",e==null?null:e.quantity," \u0448\u0442 ")}}function W(t,n){if(t&1&&_(0,U,2,3,"div",6),t&2){let e=n.$implicit;f("ngForOf",e.products)}}function X(t,n){if(t&1&&(w(0),m(1,"div"),l(2),c(),m(3,"div"),l(4),c(),m(5,"div"),l(6),c(),m(7,"div"),l(8),c(),m(9,"div"),l(10),c(),m(11,"div"),l(12),c(),E()),t&2){let e=v().$implicit;a(2),u("\u0415-\u043F\u043E\u0448\u0442\u0430: ",e.delivery.email,""),a(2),u("\u0406\u043C'\u044F: ",e.delivery.firstname,""),a(2),u("\u041F\u0440\u0456\u0437\u0432\u0438\u0449\u0435: ",e.delivery.lastname,""),a(2),u("\u041C\u0456\u0441\u0442\u043E: ",e.delivery.city,""),a(2),u("\u041D\u043E\u0432\u0430 \u043F\u043E\u0448\u0442\u0430: ",e.delivery.postoffice,""),a(2),u("\u0422\u0435\u043B\u0435\u0444\u043E\u043D: ",e.delivery.phone,"")}}function Z(t,n){if(t&1&&_(0,X,13,6,"ng-container",7),t&2){let e=n.$implicit;f("ngIf",e.delivery)}}var C=(()=>{class t{setStatus(e,i){e.status=i;let r=JSON.parse(JSON.stringify(e));r.products.forEach(o=>{o.product=o.product._id,o.productquantity=o.productquantity._id}),this.update(r)}update(e){this._commerceorderService.update(e)}get rows(){return this._commerceorderService.commerceorders}constructor(e,i,r,o,p,z){this._translate=e,this._commerceorderService=i,this._alert=r,this._form=o,this._core=p,this._router=z,this.columns=["id","products","information","status"],this.commerce=this._router.url.includes("/commerce/commerceorders/")?this._router.url.replace("/commerce/commerceorders/",""):O.commerceId||"",this.form=this._form.getForm("commerceorder",Y),this.config={create:()=>{this._form.modal(this.form,{label:"Create",click:(s,h)=>{this.commerce&&(s.commerce=this.commerce),this._commerceorderService.create(s),h()}})},update:s=>{this._form.modal(this.form,[],s).then(h=>{this._core.copy(h,s),this._commerceorderService.update(s)})},delete:s=>{this._alert.question({text:this._translate.translate("Common.Are you sure you want to delete this commerceorder?"),buttons:[{text:this._translate.translate("Common.No")},{text:this._translate.translate("Common.Yes"),callback:()=>{this._commerceorderService.delete(s)}}]})}}}_bulkManagement(e=!0){return()=>{this._form.modalDocs(e?[]:this.rows).then(i=>{if(e)for(let r of i)this.commerce&&(r.commerce=this.commerce),this._commerceorderService.create(r);else{for(let r of this.rows)i.find(o=>o._id===r._id)||this._commerceorderService.delete(r);for(let r of i){let o=this.rows.find(p=>p._id===r._id);o?(this._core.copy(r,o),this._commerceorderService.update(o)):(this.commerce&&(r.commerce=this.commerce),r.__created=!1,this._commerceorderService.create(r))}}})}}static{this.\u0275fac=function(i){return new(i||t)(d(V),d(R),d(q),d(J),d(k),d(N))}}static{this.\u0275cmp=y({type:t,selectors:[["ng-component"]],standalone:!1,decls:5,vars:3,consts:[["title","\u0417\u0430\u0430\u043C\u043E\u0432\u043B\u0435\u043D\u043D\u044F",3,"columns","config","rows"],["cell","status"],["cell","id"],["cell","products"],["cell","information"],[3,"modelChange","select","items"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(i,r){i&1&&(m(0,"wtable",0),_(1,K,1,3,"ng-template",1)(2,Q,1,1,"ng-template",2)(3,W,1,1,"ng-template",3)(4,Z,1,1,"ng-template",4),c()),i&2&&f("columns",r.columns)("config",r.config)("rows",r.rows)},dependencies:[L,j,M,B,A],encapsulation:2})}}return t})();var ee=[{path:"",component:C},{path:":commerce_id",component:C}],ve=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=I({type:t})}static{this.\u0275inj=g({imports:[$.forChild(ee),P]})}}return t})();export{ve as CommerceordersModule};
